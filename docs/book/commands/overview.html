<!DOCTYPE html>
<html lang="en" class="light sidebar-visible" dir="ltr">
	<head>
		<!-- Book generated using mdBook -->
		<meta charset="UTF-8" />
		<title>Overview - workspace-utils</title>

		<!-- Custom HTML head -->

		<meta
			name="description"
			content="A CLI tool to orchestrate scripts across monorepo workspaces with parallel execution and dependency-aware builds"
		/>
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="theme-color" content="#ffffff" />

		<link rel="icon" href="../favicon.svg" />
		<link rel="shortcut icon" href="../favicon.png" />
		<link rel="stylesheet" href="../css/variables.css" />
		<link rel="stylesheet" href="../css/general.css" />
		<link rel="stylesheet" href="../css/chrome.css" />
		<link rel="stylesheet" href="../css/print.css" media="print" />

		<!-- Fonts -->
		<link rel="stylesheet" href="../FontAwesome/css/font-awesome.css" />
		<link rel="stylesheet" href="../fonts/fonts.css" />

		<!-- Highlight.js Stylesheets -->
		<link rel="stylesheet" id="highlight-css" href="../highlight.css" />
		<link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css" />
		<link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css" />

		<!-- Custom theme stylesheets -->

		<!-- Provide site root and default themes to javascript -->
		<script>
			const path_to_root = '../';
			const default_light_theme = 'light';
			const default_dark_theme = 'navy';
			window.path_to_searchindex_js = '../searchindex.js';
		</script>
		<!-- Start loading toc.js asap -->
		<script src="../toc.js"></script>
	</head>
	<body>
		<div id="mdbook-help-container">
			<div id="mdbook-help-popup">
				<h2 class="mdbook-help-title">Keyboard shortcuts</h2>
				<div>
					<p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
					<p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
					<p>Press <kbd>?</kbd> to show this help</p>
					<p>Press <kbd>Esc</kbd> to hide this help</p>
				</div>
			</div>
		</div>
		<div id="body-container">
			<!-- Work around some values being stored in localStorage wrapped in quotes -->
			<script>
				try {
					let theme = localStorage.getItem('mdbook-theme');
					let sidebar = localStorage.getItem('mdbook-sidebar');

					if (theme.startsWith('"') && theme.endsWith('"')) {
						localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
					}

					if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
						localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
					}
				} catch (e) {}
			</script>

			<!-- Set the theme before any content is loaded, prevents flash -->
			<script>
				const default_theme = window.matchMedia('(prefers-color-scheme: dark)').matches
					? default_dark_theme
					: default_light_theme;
				let theme;
				try {
					theme = localStorage.getItem('mdbook-theme');
				} catch (e) {}
				if (theme === null || theme === undefined) {
					theme = default_theme;
				}
				const html = document.documentElement;
				html.classList.remove('light');
				html.classList.add(theme);
				html.classList.add('js');
			</script>

			<input type="checkbox" id="sidebar-toggle-anchor" class="hidden" />

			<!-- Hide / unhide sidebar before it is displayed -->
			<script>
				let sidebar = null;
				const sidebar_toggle = document.getElementById('sidebar-toggle-anchor');
				if (document.body.clientWidth >= 1080) {
					try {
						sidebar = localStorage.getItem('mdbook-sidebar');
					} catch (e) {}
					sidebar = sidebar || 'visible';
				} else {
					sidebar = 'hidden';
					sidebar_toggle.checked = false;
				}
				if (sidebar === 'visible') {
					sidebar_toggle.checked = true;
				} else {
					html.classList.remove('sidebar-visible');
				}
			</script>

			<nav id="sidebar" class="sidebar" aria-label="Table of contents">
				<!-- populated by js -->
				<mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
				<noscript>
					<iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
				</noscript>
				<div id="sidebar-resize-handle" class="sidebar-resize-handle">
					<div class="sidebar-resize-indicator"></div>
				</div>
			</nav>

			<div id="page-wrapper" class="page-wrapper">
				<div class="page">
					<div id="menu-bar-hover-placeholder"></div>
					<div id="menu-bar" class="menu-bar sticky">
						<div class="left-buttons">
							<label
								id="sidebar-toggle"
								class="icon-button"
								for="sidebar-toggle-anchor"
								title="Toggle Table of Contents"
								aria-label="Toggle Table of Contents"
								aria-controls="sidebar"
							>
								<i class="fa fa-bars"></i>
							</label>
							<button
								id="theme-toggle"
								class="icon-button"
								type="button"
								title="Change theme"
								aria-label="Change theme"
								aria-haspopup="true"
								aria-expanded="false"
								aria-controls="theme-list"
							>
								<i class="fa fa-paint-brush"></i>
							</button>
							<ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
								<li role="none">
									<button role="menuitem" class="theme" id="default_theme">Auto</button>
								</li>
								<li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
								<li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
								<li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
								<li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
								<li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
							</ul>
							<button
								id="search-toggle"
								class="icon-button"
								type="button"
								title="Search (`/`)"
								aria-label="Toggle Searchbar"
								aria-expanded="false"
								aria-keyshortcuts="/ s"
								aria-controls="searchbar"
							>
								<i class="fa fa-search"></i>
							</button>
						</div>

						<h1 class="menu-title">workspace-utils</h1>

						<div class="right-buttons">
							<a href="../print.html" title="Print this book" aria-label="Print this book">
								<i id="print-button" class="fa fa-print"></i>
							</a>
							<a
								href="https://github.com/torstendittmann/workspace-utils"
								title="Git repository"
								aria-label="Git repository"
							>
								<i id="git-repository-button" class="fa fa-github"></i>
							</a>
							<a
								href="https://github.com/torstendittmann/workspace-utils/edit/main/docs/src/commands/overview.md"
								title="Suggest an edit"
								aria-label="Suggest an edit"
								rel="edit"
							>
								<i id="git-edit-button" class="fa fa-edit"></i>
							</a>
						</div>
					</div>

					<div id="search-wrapper" class="hidden">
						<form id="searchbar-outer" class="searchbar-outer">
							<div class="search-wrapper">
								<input
									type="search"
									id="searchbar"
									name="searchbar"
									placeholder="Search this book ..."
									aria-controls="searchresults-outer"
									aria-describedby="searchresults-header"
								/>
								<div class="spinner-wrapper">
									<i class="fa fa-spinner fa-spin"></i>
								</div>
							</div>
						</form>
						<div id="searchresults-outer" class="searchresults-outer hidden">
							<div id="searchresults-header" class="searchresults-header"></div>
							<ul id="searchresults"></ul>
						</div>
					</div>

					<!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
					<script>
						document
							.getElementById('sidebar-toggle')
							.setAttribute('aria-expanded', sidebar === 'visible');
						document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
						Array.from(document.querySelectorAll('#sidebar a')).forEach(function (link) {
							link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
						});
					</script>

					<div id="content" class="content">
						<main>
							<h1 id="commands-overview">
								<a class="header" href="#commands-overview">Commands Overview</a>
							</h1>
							<p>
								workspace-utils provides three main commands designed to handle different aspects of
								monorepo workflow management. Each command is optimized for specific use cases while
								sharing common functionality like package filtering and concurrency control.
							</p>
							<h2 id="command-summary">
								<a class="header" href="#command-summary">Command Summary</a>
							</h2>
							<div class="table-wrapper">
								<table>
									<thead>
										<tr>
											<th>Command</th>
											<th>Purpose</th>
											<th>Default Mode</th>
											<th>Use Case</th>
										</tr>
									</thead>
									<tbody>
										<tr>
											<td>
												<a href="./run.html"><code>run</code></a>
											</td>
											<td>Execute scripts across packages</td>
											<td><strong>Parallel</strong></td>
											<td>Tests, linting, custom scripts</td>
										</tr>
										<tr>
											<td>
												<a href="./build.html"><code>build</code></a>
											</td>
											<td>Build packages respecting dependencies</td>
											<td><strong>Dependency order</strong></td>
											<td>Production builds, CI/CD</td>
										</tr>
										<tr>
											<td>
												<a href="./dev.html"><code>dev</code></a>
											</td>
											<td>Start development servers</td>
											<td><strong>Parallel</strong></td>
											<td>Local development</td>
										</tr>
									</tbody>
								</table>
							</div>
							<h2 id="quick-reference">
								<a class="header" href="#quick-reference">Quick Reference</a>
							</h2>
							<h3 id="wsu-run"><a class="header" href="#wsu-run">wsu run</a></h3>
							<pre><code class="language-bash">wsu run &lt;script&gt; [options]
</code></pre>
							<p>
								Execute any script across multiple packages in parallel (by default) or
								sequentially.
							</p>
							<p><strong>Package.json setup:</strong></p>
							<pre><code class="language-json">{
  "scripts": {
    "test": "wsu run test",
    "lint": "wsu run lint --sequential",
    "typecheck": "wsu run typecheck --concurrency 8"
  }
}
</code></pre>
							<p><strong>Usage:</strong></p>
							<pre><code class="language-bash">npm run test       # Run tests in parallel
npm run lint       # Run linting sequentially  
npm run typecheck  # Custom concurrency
</code></pre>
							<h3 id="wsu-build"><a class="header" href="#wsu-build">wsu build</a></h3>
							<pre><code class="language-bash">wsu build [options]
</code></pre>
							<p>
								Build packages in dependency order using topological sorting. Packages are built in
								batches where each batch can run in parallel.
							</p>
							<p><strong>Package.json setup:</strong></p>
							<pre><code class="language-json">{
  "scripts": {
    "build": "wsu build",
    "build:apps": "wsu build --filter 'apps/*'",
    "build:slow": "wsu build --concurrency 2"
  }
}
</code></pre>
							<p><strong>Usage:</strong></p>
							<pre><code class="language-bash">npm run build       # Build all packages
npm run build:apps  # Build only apps
npm run build:slow  # Limit batch concurrency
</code></pre>
							<h3 id="wsu-dev"><a class="header" href="#wsu-dev">wsu dev</a></h3>
							<pre><code class="language-bash">wsu dev [options]
</code></pre>
							<p>
								Start development servers with live log streaming. Designed for long-running
								processes with real-time output.
							</p>
							<p><strong>Package.json setup:</strong></p>
							<pre><code class="language-json">{
  "scripts": {
    "dev": "wsu dev",
    "dev:scope": "wsu dev --filter '@scope/*'",
    "dev:limited": "wsu dev --concurrency 3"
  }
}
</code></pre>
							<p><strong>Usage:</strong></p>
							<pre><code class="language-bash">npm run dev         # Start all dev servers
npm run dev:scope   # Start scoped packages
npm run dev:limited # Limit concurrent servers
</code></pre>
							<h2 id="global-options">
								<a class="header" href="#global-options">Global Options</a>
							</h2>
							<p>All commands support these common options:</p>
							<h3 id="filtering"><a class="header" href="#filtering">Filtering</a></h3>
							<ul>
								<li><code>--filter &lt;pattern&gt;</code> - Filter packages using glob patterns</li>
								<li>
									Examples: <code>"@scope/*"</code>, <code>"apps/*"</code>, <code>"*-utils"</code>,
									<code>"*frontend*"</code>
								</li>
							</ul>
							<h3 id="concurrency"><a class="header" href="#concurrency">Concurrency</a></h3>
							<ul>
								<li>
									<code>--concurrency &lt;number&gt;</code> - Maximum concurrent processes (default:
									4)
								</li>
								<li>Applies to parallel execution and batch processing</li>
							</ul>
							<h3 id="help"><a class="header" href="#help">Help</a></h3>
							<ul>
								<li><code>--help</code> - Show command-specific help and options</li>
							</ul>
							<h2 id="execution-modes">
								<a class="header" href="#execution-modes">Execution Modes</a>
							</h2>
							<h3 id="parallel-execution">
								<a class="header" href="#parallel-execution">Parallel Execution</a>
							</h3>
							<p>
								<strong>Used by:</strong> <code>run</code> (default), <code>dev</code>
								<strong>Behavior:</strong> All matching packages execute simultaneously
								<strong>Best for:</strong> Tests, linting, development servers
							</p>
							<pre><code class="language-bash">npm run test  # with "test": "wsu run test" in package.json
# ✅ Runs tests in all packages at the same time
</code></pre>
							<h3 id="sequential-execution">
								<a class="header" href="#sequential-execution">Sequential Execution</a>
							</h3>
							<p>
								<strong>Used by:</strong> <code>run</code> (with --sequential flag)
								<strong>Behavior:</strong> Packages execute one after another
								<strong>Best for:</strong> Resource-intensive tasks, ordered operations
							</p>
							<pre><code class="language-bash">npm run build:sequential  # with "build:sequential": "wsu run build --sequential"
# ✅ Runs builds one package at a time
</code></pre>
							<h3 id="dependency-aware-execution">
								<a class="header" href="#dependency-aware-execution">Dependency-Aware Execution</a>
							</h3>
							<p>
								<strong>Used by:</strong> <code>build</code> <strong>Behavior:</strong> Packages are
								grouped into batches based on dependencies <strong>Best for:</strong> Building,
								publishing, dependency-critical operations
							</p>
							<pre><code class="language-bash">npm run build  # with "build": "wsu build" in package.json
# ✅ Builds dependencies first, then dependents
</code></pre>
							<h2 id="package-manager-detection">
								<a class="header" href="#package-manager-detection">Package Manager Detection</a>
							</h2>
							<p>workspace-utils automatically detects your package manager:</p>
							<div class="table-wrapper">
								<table>
									<thead>
										<tr>
											<th>Package Manager</th>
											<th>Detection Criteria</th>
										</tr>
									</thead>
									<tbody>
										<tr>
											<td><strong>Bun</strong></td>
											<td>
												<code>bun.lockb</code>, <code>bunfig.toml</code>, or bun-specific
												<code>package.json</code> fields
											</td>
										</tr>
										<tr>
											<td><strong>pnpm</strong></td>
											<td><code>pnpm-lock.yaml</code>, <code>pnpm-workspace.yaml</code></td>
										</tr>
										<tr>
											<td><strong>npm</strong></td>
											<td><code>package-lock.json</code>, <code>.npmrc</code></td>
										</tr>
									</tbody>
								</table>
							</div>
							<p>
								The detected package manager is used for all script execution (e.g.,
								<code>bun run test</code>, <code>pnpm run test</code>, <code>npm run test</code>).
							</p>
							<h2 id="error-handling">
								<a class="header" href="#error-handling">Error Handling</a>
							</h2>
							<h3 id="exit-behavior"><a class="header" href="#exit-behavior">Exit Behavior</a></h3>
							<ul>
								<li>
									<strong>Single failure in parallel mode:</strong> Other packages continue running
								</li>
								<li>
									<strong>Single failure in sequential mode:</strong> Execution stops immediately
								</li>
								<li>
									<strong>Single failure in build mode:</strong> Current batch fails, subsequent
									batches are skipped
								</li>
							</ul>
							<h3 id="exit-codes"><a class="header" href="#exit-codes">Exit Codes</a></h3>
							<ul>
								<li><code>0</code> - All packages executed successfully</li>
								<li><code>1</code> - One or more packages failed</li>
								<li><code>2</code> - Configuration or setup error</li>
							</ul>
							<h2 id="output-format"><a class="header" href="#output-format">Output Format</a></h2>
							<p>All commands provide consistent, color-coded output:</p>
							<pre><code>🚀 Starting operation...
📁 Workspace root: /path/to/workspace
📦 Found X packages
✅ Running "script" in Y packages
🔧 Package manager: detected-pm
⚡ Execution mode: parallel/sequential/dependency-order

[package-1] Starting: pm run script
[package-2] Starting: pm run script
[package-1] ✅ Completed in 1,234ms
[package-2] ❌ Failed with exit code 1

📊 Execution Summary:
✅ Successful: 1
❌ Failed: 1
⏱️  Total duration: 2,345ms
</code></pre>
							<h2 id="best-practices">
								<a class="header" href="#best-practices">Best Practices</a>
							</h2>
							<h3 id="choose-the-right-command">
								<a class="header" href="#choose-the-right-command">Choose the Right Command</a>
							</h3>
							<ul>
								<li>
									<strong><code>run</code></strong> for most script execution (tests, linting,
									utilities)
								</li>
								<li>
									<strong><code>build</code></strong> when package dependencies matter
								</li>
								<li>
									<strong><code>dev</code></strong> for long-running development processes
								</li>
							</ul>
							<h3 id="use-filtering-effectively">
								<a class="header" href="#use-filtering-effectively">Use Filtering Effectively</a>
							</h3>
							<pre><code class="language-json">{
  "scripts": {
    "test:packages": "wsu run test --filter 'packages/*'",
    "dev:apps": "wsu dev --filter 'apps/*'",
    "build:company": "wsu build --filter '@company/*'"
  }
}
</code></pre>
							<h3 id="optimize-concurrency">
								<a class="header" href="#optimize-concurrency">Optimize Concurrency</a>
							</h3>
							<pre><code class="language-json">{
  "scripts": {
    "build:slow": "wsu run build --concurrency 2",
    "test:fast": "wsu run test --concurrency 8",
    "dev": "wsu dev --concurrency 4"
  }
}
</code></pre>
							<h2 id="next-steps"><a class="header" href="#next-steps">Next Steps</a></h2>
							<p>Dive deeper into each command:</p>
							<ul>
								<li>
									<a href="./run.html"><strong>run command</strong></a> - Detailed script execution
									options
								</li>
								<li>
									<a href="./build.html"><strong>build command</strong></a> - Dependency-aware
									building
								</li>
								<li>
									<a href="./dev.html"><strong>dev command</strong></a> - Development server
									management
								</li>
							</ul>
						</main>

						<nav class="nav-wrapper" aria-label="Page navigation">
							<!-- Mobile navigation buttons -->
							<a
								rel="prev"
								href="../configuration.html"
								class="mobile-nav-chapters previous"
								title="Previous chapter"
								aria-label="Previous chapter"
								aria-keyshortcuts="Left"
							>
								<i class="fa fa-angle-left"></i>
							</a>

							<a
								rel="next prefetch"
								href="../commands/run.html"
								class="mobile-nav-chapters next"
								title="Next chapter"
								aria-label="Next chapter"
								aria-keyshortcuts="Right"
							>
								<i class="fa fa-angle-right"></i>
							</a>

							<div style="clear: both"></div>
						</nav>
					</div>
				</div>

				<nav class="nav-wide-wrapper" aria-label="Page navigation">
					<a
						rel="prev"
						href="../configuration.html"
						class="nav-chapters previous"
						title="Previous chapter"
						aria-label="Previous chapter"
						aria-keyshortcuts="Left"
					>
						<i class="fa fa-angle-left"></i>
					</a>

					<a
						rel="next prefetch"
						href="../commands/run.html"
						class="nav-chapters next"
						title="Next chapter"
						aria-label="Next chapter"
						aria-keyshortcuts="Right"
					>
						<i class="fa fa-angle-right"></i>
					</a>
				</nav>
			</div>

			<!-- Livereload script (if served using the cli tool) -->
			<script>
				const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
				const wsAddress = wsProtocol + '//' + location.host + '/' + '__livereload';
				const socket = new WebSocket(wsAddress);
				socket.onmessage = function (event) {
					if (event.data === 'reload') {
						socket.close();
						location.reload();
					}
				};

				window.onbeforeunload = function () {
					socket.close();
				};
			</script>

			<script>
				window.playground_copyable = true;
			</script>

			<script src="../elasticlunr.min.js"></script>
			<script src="../mark.min.js"></script>
			<script src="../searcher.js"></script>

			<script src="../clipboard.min.js"></script>
			<script src="../highlight.js"></script>
			<script src="../book.js"></script>

			<!-- Custom JS scripts -->
		</div>
	</body>
</html>
